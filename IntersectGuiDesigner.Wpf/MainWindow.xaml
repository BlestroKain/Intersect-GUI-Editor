<Window x:Class="IntersectGuiDesigner.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:IntersectGuiDesigner.Wpf"
        Title="Intersect GUI Designer (WPF)" Height="720" Width="1200">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <local:InverseBooleanToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" />
    </Window.Resources>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="_Open JSON..." Click="OpenJson_OnClick" />
                <Separator />
                <MenuItem Header="_Export Layout JSON..." Click="ExportLayoutJson_OnClick" />
                <MenuItem Header="_Render Wireframe..." Click="RenderWireframe_OnClick" />
            </MenuItem>
        </Menu>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="320" />
            </Grid.ColumnDefinitions>
            <Border Grid.Column="0" BorderThickness="1" BorderBrush="Gray" Padding="8" Margin="8,8,4,8">
                <TreeView ItemsSource="{Binding RootNodes}"
                          local:TreeViewSelectionBehavior.SelectedItem="{Binding SelectedNode, Mode=TwoWay}">
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                            <TextBlock Text="{Binding Name}" />
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </Border>
            <Border Grid.Column="1" BorderThickness="1" BorderBrush="Gray" Margin="4,8,4,8">
                <ItemsControl ItemsSource="{Binding WireframeNodes}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <Canvas Background="#FFEFEFEF" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemContainerStyle>
                        <Style TargetType="ContentPresenter">
                            <Setter Property="Canvas.Left" Value="{Binding BoundsX}" />
                            <Setter Property="Canvas.Top" Value="{Binding BoundsY}" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding HasBounds}" Value="False">
                                    <Setter Property="Visibility" Value="Collapsed" />
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ItemsControl.ItemContainerStyle>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Border BorderBrush="#FF2B6CB0" BorderThickness="1"
                                        Background="#1F3182CE"
                                        Width="{Binding BoundsWidth}" Height="{Binding BoundsHeight}" />
                                <TextBlock Text="{Binding Name}" Foreground="#FF1A202C" Margin="4" />
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Border>
            <Border Grid.Column="2" BorderThickness="1" BorderBrush="Gray" Padding="8" Margin="4,8,8,8">
                <StackPanel>
                    <TextBlock Text="Properties" FontWeight="Bold" Margin="0,0,0,8" />
                    <TextBlock Text="Select a node to view details." />
                    <TextBlock Text="Wireframe Preview" FontWeight="Bold" Margin="0,16,0,8" />
                    <Border BorderThickness="1" BorderBrush="LightGray" Padding="4">
                        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                            <Image x:Name="WireframeImage" Stretch="None" />
                        </ScrollViewer>
                    </Border>
                </StackPanel>
            </Border>
        </Grid>
    </DockPanel>
</Window>
